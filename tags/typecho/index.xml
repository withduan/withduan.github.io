<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Typecho on JL DUAN‘s Blog</title>
    <link>https://localhost:1313/tags/typecho/</link>
    <description>Recent content in Typecho on JL DUAN‘s Blog</description>
    <generator>Hugo</generator>
    <language>zh-cn</language>
    <lastBuildDate>Tue, 19 Aug 2025 00:00:00 +0800</lastBuildDate>
    <atom:link href="https://localhost:1313/tags/typecho/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>hugo 装修小记</title>
      <link>https://localhost:1313/posts/hugo-customization/</link>
      <pubDate>Tue, 19 Aug 2025 00:00:00 +0800</pubDate>
      <guid>https://localhost:1313/posts/hugo-customization/</guid>
      <description>&lt;p&gt;我先前用的一个香港虚拟主机原本是 2025 年到期，但是考虑到博客建立的这几年也很少有什么内容输出，发的东西也没什么人看，为了博客单独搞一台服务器实在是没有必要，到期也不打算再续费了。到了 2023 年底，我开始准备把博客提前迁移到 GitHub Pages。&lt;/p&gt;&#xA;&lt;p&gt;由于 GitHub Pages 仅支持静态页面，之前使用的 typecho 也没法继续用。四处考察了一番，决定利用 hugo 重建博客，这期间找到了一个喜欢的主题 minimal-bootstrap。&lt;/p&gt;&#xA;&lt;p&gt;我当初是在 hugo 官网发现的这款主题，写文章的时候发现原 hugo 官网主题链接已经处于 404 状态。可能是因为主题已经不再维护，hugo 官网将其下架了。&lt;/p&gt;&#xA;&lt;p&gt;原 hugo themes 链接：&lt;a href=&#34;https://themes.gohugo.io/themes/minimal-bootstrap-hugo-theme/&#34;&gt;https://themes.gohugo.io/themes/minimal-bootstrap-hugo-theme/&lt;/a&gt;（已失效）&lt;/p&gt;&#xA;&lt;p&gt;GitHub：&lt;a href=&#34;https://github.com/zwbetz-gh/minimal-bootstrap-hugo-theme&#34;&gt;https://github.com/zwbetz-gh/minimal-bootstrap-hugo-theme&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h1 id=&#34;从-typecho-到-hugo&#34;&gt;从 typecho 到 hugo&lt;/h1&gt;&#xA;&lt;p&gt;我对 typecho 实在太熟悉了，再加上用的时间也久，可能是因为 typecho 本身就很简洁，源码文件结构清晰，即便是我这样完全不懂 php 的人来说（迄今为止，我的代码水平仅限于大学计算机基础课上学过的那一点点 C 语言…），看看源码，连蒙带猜也能修改很多东西，打造出自己满意的效果。&lt;/p&gt;&#xA;&lt;p&gt;换成 hugo 之后算是一夜回到解放前，hugo 的代码我不太看得懂，而且主题文件看起来比 typecho 复杂的多，幸好现在有了大模型编程工具的助力（我用的是字节的 Trae，指定的模型是 Claude-4-Sonnet Beta），基本上只要你能描述清楚需求，它改代码效率还是挺不错的，调试网页的过程中也极少报错。大模型似乎很擅长写前端代码，我改了很多次，基本都跑通了。我之前用它写过 macOS 应用，当时感觉不是很顺手。&lt;/p&gt;&#xA;&lt;p&gt;我选的主题 minimal-bootstrap 看起来和 typecho 的风格很像，虽然功能不丰富，默认样式也略显简陋，我碍于自身实力，也只能凑合着用，直到最近才意识到可以用 Trae 去改造它。&lt;/p&gt;&#xA;&lt;h1 id=&#34;主要的改造项&#34;&gt;主要的改造项&lt;/h1&gt;&#xA;&lt;h2 id=&#34;1导航栏显示网站标题&#34;&gt;1.导航栏显示网站标题&lt;/h2&gt;&#xA;&lt;p&gt;minimal-bootstrap 主题的导航栏简洁到甚至不显示网站标题，我希望它至少可以展示出网站的名称。当你看到这里时，不妨留意一下现在的顶栏，前面的「JL DUAN‘s Blog」就是我自己加上去的，原版主题中顶栏只有四个链接…&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://img.iduan.me/blog/hugo-customization-01.webp&#34; alt=&#34;hugo-customization-01&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;修改方法是找到主题文件中 layout/partials/nav.html 文件，在适当位置插入：&lt;/p&gt;&#xA;&lt;p&gt;&lt;code&gt;&amp;lt;strong&amp;gt;&amp;lt;span style=&amp;quot;color:#FFFFFF;&amp;quot;&amp;gt;{{.Site.Title}}&amp;lt;/span&amp;gt;&amp;lt;/strong&amp;gt;&amp;lt;span style=&amp;quot;color:#FFFFFF;&amp;quot;&amp;gt;丨&amp;lt;/span&amp;gt;&lt;/code&gt;&lt;/p&gt;&#xA;&lt;p&gt;这里只用了一小段 HTML 代码就能实现这个需求，顺便加了个「丨」将网站名称和后方的导航选项分隔开。而且这个改法是我自己摸索出来的，那时候还没有 Trae……&lt;/p&gt;&#xA;&lt;h2 id=&#34;2区分独立页面和文章页面&#34;&gt;2.区分独立页面和文章页面&lt;/h2&gt;&#xA;&lt;p&gt;独立页面和文章页面最大的区别是：独立页面不需要显示标题和发布时间，但是文章页面需要这两项内容。按照 minimal-bootstrap 的说明，主题本身应该可以支持设置不同的页面属性，可能是我的用法不对，反正一直都无从下手。直接把需求告诉 Trae，最终实现了这个效果。&lt;/p&gt;&#xA;&lt;p&gt;用法：&#xA;创建页面时需要设定 &lt;code&gt;page&lt;/code&gt;参数，&lt;code&gt;true&lt;/code&gt;表示这是独立页面，&lt;code&gt;false&lt;/code&gt;表示这是文章页面，默认为&lt;code&gt;false&lt;/code&gt;。&lt;/p&gt;&#xA;&lt;h2 id=&#34;3添加评论框可选是否启用页面评论区&#34;&gt;3.添加评论框，可选是否启用页面评论区&lt;/h2&gt;&#xA;&lt;p&gt;hugo 自身不支持评论互动（哈哈其实很少有人会留言），我通过 giscus 这个项目为博客添加了一个评论框,默认的几个样式就非常简洁，完全不需要再改动什么了。但 giscus 会默认给所有页面都加上评论框，如果用户能手动控制是否启用页面的评论区就更好了，这里同样用 Trae 解决了这个需求。&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://img.iduan.me/blog/hugo-customization-02.webp&#34; alt=&#34;hugo-customization-02&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;用法：&#xA;创建页面时需要设定 &lt;code&gt;comment&lt;/code&gt; 参数，&lt;code&gt;true&lt;/code&gt; 或留空表示启用评论区，&lt;code&gt;false&lt;/code&gt; 表示不需要评论区，默认为&lt;code&gt;true&lt;/code&gt;。&lt;/p&gt;&#xA;&lt;h2 id=&#34;4优化-markdown-标题样式&#34;&gt;4.优化 markdown 标题样式&lt;/h2&gt;&#xA;&lt;p&gt;原版主题在显示 markdown 标题时，没有做任何特殊样式，仅是放大加粗了各级标题的字号，可读性方面不够友好。特别是 1-4 级标题字号大到离谱，我也不知道怎么缩小字号，迫使我之前写东西都直接从 4 级标题开始用，好在现在我可以直接用 Trae 修改 markdown 1-6 级标题的样式（一般用不到 6 级标题，对我个人而言最多 1-4 级足矣）。&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://img.iduan.me/blog/hugo-customization-03.webp&#34; alt=&#34;hugo-customization-03&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;现在这个标题样式是 Trae 自己生成的，虽然也不算很好看，但总比之前单纯粗暴的加大加粗字号看起来更优雅、醒目，先就这么用着，留着以后再改吧。&lt;/p&gt;&#xA;&lt;h2 id=&#34;5为豆瓣网址添加豆瓣-logo-图标&#34;&gt;5.为豆瓣网址添加豆瓣 logo 图标&lt;/h2&gt;&#xA;&lt;p&gt;博客之前发过一些读书笔记，我在码字的时候，顺便给每本书都加上了豆瓣对应的链接，所以博客还是有很多豆瓣的外链的。因为有了 Trae，我想给豆瓣链接增加一些特别的样式：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;网站的外链默认是蓝色的，豆瓣的链接可以换成和豆瓣更适配的绿色；&lt;/li&gt;&#xA;&lt;li&gt;豆瓣链接前方可以加上豆瓣的 logo，让这个链接更加直观。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;把我的要求告诉 Trae，顺便准备好豆瓣的图标资源（刚好可以把图标上传到我之前利用 Cloudflare R2 做的图床）。Trae 告诉我，通过修改 CSS 样式表完成了这个任务。好吧，这已经触及到了我的知识盲区。&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://img.iduan.me/blog/hugo-customization-04.webp&#34; alt=&#34;hugo-customization-04&#34;&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;6修改标签tags页面样式&#34;&gt;6.修改标签（tags）页面样式&lt;/h2&gt;&#xA;&lt;p&gt;在主题默认样式中，原本标签页面里每个标签都会另起一行显示。我写东西时标签都是随便加的，因此文章的标签有很多，导致这个页面变得很长……&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://img.iduan.me/blog/hugo-customization-05.webp&#34; alt=&#34;hugo-customization-05&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;通过 Trae 修改了这个页面，让所有的标签都平铺显示，这下看起来就舒服很多了。&lt;/p&gt;&#xA;&lt;h2 id=&#34;7删除不需要的功能&#34;&gt;7.删除不需要的功能&lt;/h2&gt;&#xA;&lt;p&gt;主题默认支持 Google Analytics，只需要在配置文件填入 Google Analytics 后台提供的 GA 代码就能使用。不过现如今出于用户隐私的考虑，目前各大操作系统、浏览器、去广告插件都会拦截这类数据分析服务，导致在 Google Analytics 后台看不到任何统计信息。而且我自建了一个简单的统计服务 umami 用来替代 Google Analytics，所以通过 Trae 将 Google Analytics 相关代码文件都进行了删除。&lt;/p&gt;&#xA;&lt;p&gt;同理，主题中包含的 mastodon 相关代码也因为我自己用不到所以让 Trae 将其移除了。&lt;/p&gt;&#xA;&lt;h2 id=&#34;8修改底栏&#34;&gt;8.修改底栏&lt;/h2&gt;&#xA;&lt;p&gt;主题原版的底栏只是一行文字，导航栏又是深色，显得有一些头重脚轻。&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://img.iduan.me/blog/hugo-customization-06.webp&#34; alt=&#34;hugo-customization-06&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;我通过 Trae 将其修改为和导航栏相似的样式，在视觉上和导航栏颜色、高度均一致，看起来平衡多了。&lt;/p&gt;&#xA;&lt;h2 id=&#34;9为文章添加目录&#34;&gt;9.为文章添加目录&lt;/h2&gt;&#xA;&lt;p&gt;根据主题的 readme 文件，主题原本应该支持自动为文章生成 table of content 目录，但是我摸索了许久，实在搞不懂要如何操作，这次直接用 Trae 满足这个需求。&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://img.iduan.me/blog/hugo-customization-07.webp&#34; alt=&#34;hugo-customization-07&#34;&gt;&lt;/p&gt;&#xA;</description>
    </item>
    <item>
      <title>只要活得够久……</title>
      <link>https://localhost:1313/posts/typecho-update-20220401/</link>
      <pubDate>Fri, 01 Apr 2022 00:00:00 +0800</pubDate>
      <guid>https://localhost:1313/posts/typecho-update-20220401/</guid>
      <description>&lt;p&gt;Typecho 在愚人节更新 1.2 版本，而距离其上一次更新已经过去了 1616 天……&lt;/p&gt;&#xA;&lt;p&gt;以下内容转载自 Typecho &lt;a href=&#34;http://typecho.org/blog/&#34;&gt;博客&lt;/a&gt;&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;h1 id=&#34;这不是玩笑我们回来了typecho-120&#34;&gt;这不是玩笑，我们回来了：Typecho 1.2.0&lt;/h1&gt;&#xA;&lt;p&gt;是的，你没有看错，经过漫长的等待，我们终于发布了 Typecho 1.2.0 正式版。这个版本的开发经历了如此长的时间，以至于我无法一次性列出这么长的详细改进列表。 除了修复了很多bug以外，我们重要的改进有如下几点：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;新的编辑器实时预览自动跟随效果，以及主题内预览功能&lt;/li&gt;&#xA;&lt;li&gt;后台界面对移动端的适配&lt;/li&gt;&#xA;&lt;li&gt;新的安装程序&lt;/li&gt;&#xA;&lt;li&gt;进入 PHP 7.2 时代，以及对 PHP 8 的更好支持&lt;/li&gt;&#xA;&lt;li&gt;对&lt;a href=&#34;https://github.com/typecho/Dockerfile&#34;&gt;容器化&lt;/a&gt;的更好支持&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;除了新功能，大家也可以发现我们的版本号规则有变化。新的版本号会采用常规的3组数字组成，比如 1.2.0 。它适合小步快跑的开发模式，具体的解释可以看&lt;a href=&#34;https://joyqi.com/typecho/about-typecho-1-2-dev-plan.html&#34;&gt;这篇文章&lt;/a&gt;。&#xA;这个小小的软件记录了我们很多人生命中最美好的时光，大家用它在缤纷多彩的互联网上留下自己的印记。快乐，伤痛，成长，迷惘，时间无情地流过，我们却让它有了意义。这时我们再回头来看Typecho 的名称组成：轻击键盘，静候回音。在你写下文字的时候，涟漪已然产生。&#xA;而于我来说，十多年前键盘敲下的第一行代码，也不知不觉产生了这么大的回响。在这春回大地之际，感怀之余，未免又对未来心生希望起来。让我们大声宣布，&lt;a href=&#34;https://github.com/typecho/typecho/releases/tag/v1.2.0&#34;&gt;Typecho回来了&lt;/a&gt;！&lt;/p&gt;&#xA;&lt;/blockquote&gt;</description>
    </item>
    <item>
      <title>Typecho 功能优化小结</title>
      <link>https://localhost:1313/posts/typecho-optimization/</link>
      <pubDate>Thu, 10 Mar 2022 00:00:00 +0800</pubDate>
      <guid>https://localhost:1313/posts/typecho-optimization/</guid>
      <description>&lt;p&gt;Typecho 是我在大学时就发现的一个博客程序，相比起流行的 WordPress，它的优势是代码更加轻量化，默认主题风格非常的简洁，适合我这种不喜欢过多折腾的用户。&lt;/p&gt;&#xA;&lt;p&gt;然而因其更新周期过于佛系（Typecho 上次更新是在 2017 年……）在多年的使用过程中，也会遇到一些问题或者是使用习惯差异，需要对其进行修改。&lt;/p&gt;&#xA;&lt;h2 id=&#34;1删除域名中的www&#34;&gt;1.删除域名中的&lt;code&gt;www&lt;/code&gt;&lt;/h2&gt;&#xA;&lt;p&gt;域名解析并不是 Typecho 自身的问题，但和网站最终展示效果相关，去除网址中的&lt;code&gt;www&lt;/code&gt;可以使网站地址更加简洁。&lt;/p&gt;&#xA;&lt;p&gt;另外当你申请免费https证书时，&lt;code&gt;www.iduan.me&lt;/code&gt;和&lt;code&gt;iduan.me&lt;/code&gt;需要分别申请证书，如果强制跳转不带&lt;code&gt;www&lt;/code&gt;的地址，则只需要申请一个不带&lt;code&gt;www&lt;/code&gt;的&lt;code&gt;iduan.me&lt;/code&gt;证书即可。&lt;/p&gt;&#xA;&lt;p&gt;注：博客网址去除&lt;code&gt;www&lt;/code&gt;只是个人习惯，如果你不喜欢也可以忽略这一步。&lt;/p&gt;&#xA;&lt;h2 id=&#34;2强制跳转-https&#34;&gt;2.强制跳转 🔒https&lt;/h2&gt;&#xA;&lt;p&gt;如果说去除&lt;code&gt;www&lt;/code&gt;是可有可无的习惯，那么为网站开启 https 访问在如今就显得十分有必要。开启 🔒https 后，网站地址左侧会出现一把锁🔒的标志，但是在未修改设置的情况下，网站依然可以通过输入 http 网址访问。我们同样可以修改服务器文件来实现强制全站 🔒https 访问。&lt;/p&gt;&#xA;&lt;p&gt;结合第 1 步的操作，最终可以实现如下效果：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;输入 &lt;a href=&#34;http://www.iduan.me&#34;&gt;http://www.iduan.me&lt;/a&gt; 跳转到 &lt;a href=&#34;https://iduan.me&#34;&gt;https://iduan.me&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;输入 &lt;a href=&#34;http://iduan.me&#34;&gt;http://iduan.me&lt;/a&gt; 跳转到 &lt;a href=&#34;https://iduan.me&#34;&gt;https://iduan.me&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;输入 &lt;a href=&#34;https://www.iduan.me&#34;&gt;https://www.iduan.me&lt;/a&gt; 跳转到 &lt;a href=&#34;https://iduan.me&#34;&gt;https://iduan.me&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;输入 &lt;a href=&#34;https://iduan.me&#34;&gt;https://iduan.me&lt;/a&gt; 跳转到 &lt;a href=&#34;https://iduan.me&#34;&gt;https://iduan.me&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;也就是说，网站最终都会跳转至不带&lt;code&gt;www&lt;/code&gt;的&lt;code&gt;https&lt;/code&gt;网址。&#xA;找到网站根目录下的&lt;code&gt;.htaccess&lt;/code&gt;文件，添加以下内容：&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;RewriteEngine on   &#xA;#删除网址中的 www，并强制跳转 https&#xA;RewriteCond %{HTTP_HOST} ^www.iduan.me$&#xA;RewriteRule ^(.*)$ https://iduan.me/$1 [R=301,L]&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;3为-typecho-添加-emoji-支持&#34;&gt;3.为 Typecho 添加 emoji 支持&lt;/h2&gt;&#xA;&lt;p&gt;Typecho 最后一次更新是 2017 年，而且它使用的编码是&lt;code&gt;utf8&lt;/code&gt;，在默认情况下不支持 emoji 的显示。不仅如此，如果你在后台编辑器编辑文章时加入了 emoji，因程序无法正常识别，在点击保存时，emoji 表情以及之后输入所有的内容都会被丢弃。&lt;/p&gt;&#xA;&lt;p&gt;我们只需要先进入 phpMyAdmin 后台，将数据库格式修改为&lt;code&gt;utf8mb4_unicode_ci&lt;/code&gt;，再编辑 Typecho 目录下&lt;code&gt;config.inc.php&lt;/code&gt;文件，将 Typecho 的编码方式由&lt;code&gt;utf8&lt;/code&gt;修改为&lt;code&gt;utf8mb4&lt;/code&gt;，即可正常编辑、保存和显示 emoji 内容。&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
