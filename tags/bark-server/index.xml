<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Bark-Server on JL DUANâ€˜s Blog</title>
    <link>https://iduan.me/tags/bark-server/</link>
    <description>Recent content in Bark-Server on JL DUANâ€˜s Blog</description>
    <generator>Hugo</generator>
    <language>zh-cn</language>
    <lastBuildDate>Fri, 08 Apr 2022 00:00:00 +0800</lastBuildDate>
    <atom:link href="https://iduan.me/tags/bark-server/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>è‡ªå»º Bark åç«¯æœåŠ¡</title>
      <link>https://iduan.me/posts/bark-server-self-hosting/</link>
      <pubDate>Fri, 08 Apr 2022 00:00:00 +0800</pubDate>
      <guid>https://iduan.me/posts/bark-server-self-hosting/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://www.v2ex.com/t/467407&#34;&gt;Bark&lt;/a&gt; æ˜¯ä¸€æ¬¾å¯ä»¥ç»™ iPhone å‘é€è‡ªå®šä¹‰æ¨é€çš„æœåŠ¡ï¼Œä½ å¯ä»¥åˆ©ç”¨ Bark åšä¸€äº›æœ‰è¶£çš„äº‹æƒ…ï¼Œæ¯”å¦‚æˆ‘ä¹‹å‰åˆ†äº«çš„ï¼š&lt;a href=&#34;https://sspai.com/post/71054&#34;&gt;é…åˆ SmsForward è½¬å‘ Android è®¾å¤‡çš„çŸ­ä¿¡è‡³ iPhone&lt;/a&gt;ã€‚Bark æœ¬èº«æä¾›åç«¯æœåŠ¡ï¼ŒåŒæ—¶ä¹Ÿå¼€æºäº†æœåŠ¡ç«¯ä»£ç ï¼Œä½ å¯ä»¥åˆ©ç”¨ docker è½»æ¾åœ¨æœåŠ¡å™¨ç«¯éƒ¨ç½²ç§æœ‰åŒ– Bark åç«¯æœåŠ¡ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä¹‹å‰åœ¨åšå®¢æœ‰&lt;a href=&#34;https://iduan.me/archives/4/&#34;&gt;æåˆ°è¿‡&lt;/a&gt;æˆ‘é—²ç½®äº†ä¸€ä¸ªè…¾è®¯äº‘è™šæ‹Ÿä¸»æœºï¼Œç”±äºåŸŸåå¤‡æ¡ˆçš„å…³ç³»ï¼Œç°åœ¨æ— æ³•æ­£å¸¸ä½¿ç”¨ã€‚æˆ‘æƒ³ä¸å…¶é—²ç½®åœ¨é‚£é‡Œï¼Œä¸å¦‚æ‹¿æ¥åšç‚¹æœ‰è¶£çš„äº‹æƒ…ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æˆ‘æœ¬èº«å¯¹æœåŠ¡å™¨è¿™æ–¹é¢ä¸æ˜¯ç‰¹åˆ«äº†è§£ï¼Œçœ‹åˆ° Bark åç«¯åªæä¾›äº† docker è¿™ä¸€ç§éƒ¨ç½²æ–¹å¼ã€‚æœ¬æ¥å¯ä»¥åœ¨è…¾è®¯äº‘æœåŠ¡å™¨çš„ç®¡ç†é¢æ¿ä¸­ç›´æ¥é‡ç½®ç³»ç»Ÿé•œåƒä¸º dockerï¼Œè¿™æ—¶å¿½ç„¶æƒ³èµ·æ¥ï¼Œä¹‹å‰å»ºç«™ç»å¸¸è¦ç”¨åˆ°çš„å®å¡”é¢æ¿å°±å¯ä»¥å®‰è£… docker ç®¡ç†å™¨ï¼Œå®å¡”é¢æ¿é‡Œç¼–è¾‘æœåŠ¡å™¨é‡Œçš„æ–‡ä»¶ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ï¼Œæ‰€ä»¥å°±å…ˆå®‰è£…äº†å®å¡”é¢æ¿ï¼Œæ–¹ä¾¿æˆ‘åç»­è¿›è¡Œæ“ä½œã€‚&lt;/p&gt;&#xA;&lt;p&gt;æŒ‰ç…§å®˜æ–¹çš„&lt;a href=&#34;https://day.app/2018/06/bark-server-document/&#34;&gt;æ•™ç¨‹&lt;/a&gt;ï¼Œæˆ‘æˆåŠŸåœ°åœ¨æœåŠ¡å™¨ä¸­éƒ¨ç½²å¥½äº† Bark åç«¯æœåŠ¡ã€‚æœ¬æ¥æƒ³è§£æä¸€ä¸ªäºŒçº§åŸŸå&lt;code&gt;push.iduan.me&lt;/code&gt;åœ¨è¿™å°æœåŠ¡å™¨ä¸Šï¼Œæ–¹ä¾¿é…ç½®ã€‚è°çŸ¥è§£æç”Ÿæ•ˆè¿˜æ²¡è¿‡ 10 åˆ†é’Ÿï¼Œå°±è¢«è…¾è®¯äº‘æ‹¦æˆªäº†ï¼Œç”±äºè¿™ä¸ªåŸŸåè¿˜æ²¡æœ‰å¤‡æ¡ˆï¼ŒæŒ‰ç…§ç›¸å…³æ³•å¾‹æ³•è§„çš„è¦æ±‚ï¼Œè§£ææ˜¯æ— æ³•ç”Ÿæ•ˆçš„ï¼Œå› æ­¤åœ¨é…ç½®åç«¯æœåŠ¡æ—¶ï¼Œåªèƒ½å¡«å†™ IP åœ°å€ï¼Œä¸è¿‡å½±å“ä¹Ÿä¸å¤§ï½&lt;/p&gt;&#xA;&lt;p&gt;æœ€éº»çƒ¦çš„æ˜¯ç»™è¿™ä¸ªè‡ªå»ºçš„åç«¯æœåŠ¡æ·»åŠ  SSL æ”¯æŒï¼Œå®˜æ–¹æ•™ç¨‹åªæ˜¯é˜è¿°äº†æ€ä¹ˆéƒ¨ç½²æ”¯æŒ http è®¿é—®çš„åç«¯ï¼Œæ ¹æœ¬æ²¡æ SSL çš„äº‹æƒ…ã€‚ä»¥å‰åœ¨å®å¡”é¢æ¿é‡Œä¸ºç½‘ç«™å¼€å¯ https è®¿é—®çš„æ–¹æ³•åœ¨è¿™é‡Œå®Œå…¨è¡Œä¸é€šï¼Œä¸ºæ­¤åˆè€—è´¹å¤§é‡æ—¶é—´å»ç½‘ç»œä¸­æœç´¢ï¼Œç­‰è¿™å¥—åç«¯æœåŠ¡å½»åº•æå¥½çš„æ—¶å€™å·²ç»æ˜¯åŠå¤œä¸¤ç‚¹äº†â€¦â€¦&lt;/p&gt;&#xA;&lt;p&gt;ä»¥ä¸‹æ˜¯æœåŠ¡æ­å»ºè¿‡ç¨‹ä¸­å¼€å¯ SSL çš„ä¸€ç‚¹ç‚¹ç¬”è®°ï¼š&lt;/p&gt;&#xA;&lt;h1 id=&#34;ä¸º-ip-åœ°å€ç”³è¯·-ssl-è¯ä¹¦&#34;&gt;âœğŸ»ä¸º IP åœ°å€ç”³è¯· SSL è¯ä¹¦&lt;/h1&gt;&#xA;&lt;p&gt;å¤§éƒ¨åˆ†äº‘æœåŠ¡å•†ä¸æ”¯æŒä¸º IP åœ°å€ç”³è¯· SSL è¯ä¹¦ï¼Œå¯ä»¥è®¿é—® &lt;a href=&#34;https://zerossl.com/&#34;&gt;ZeroSSL&lt;/a&gt; ç”³è¯· IP åœ°å€çš„SSLè¯ä¹¦ï¼Œå…è´¹è´¦æˆ·ç”³è¯·çš„è¯ä¹¦æœ‰æ•ˆæœŸåªæœ‰ä¸‰ä¸ªæœˆï¼Œè€Œä¸”ä¸æ”¯æŒè‡ªåŠ¨ç»­ç­¾ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å°†ç­¾å‘çš„è¯ä¹¦ï¼ˆä¸¤ä¸ª&lt;code&gt;.crt&lt;/code&gt;æ–‡ä»¶ï¼Œä¸€ä¸ª&lt;code&gt;.key&lt;/code&gt;æ–‡ä»¶ï¼‰ä¸Šä¼ è‡³&lt;code&gt;/www/server/nginx/conf/cert&lt;/code&gt;ç›®å½•ä¸‹ï¼ˆæ²¡æœ‰ cert æ–‡ä»¶å¤¹å°±æ–°å»ºä¸€ä¸ªï¼‰&lt;/p&gt;&#xA;&lt;h1 id=&#34;ä¸ºæœåŠ¡å™¨å¯ç”¨-ssl&#34;&gt;âœğŸ»ä¸ºæœåŠ¡å™¨å¯ç”¨ SSL&lt;/h1&gt;&#xA;&lt;p&gt;ä¿®æ”¹ &lt;code&gt;/www/server/nginx/conf&lt;/code&gt; è·¯å¾„ä¸‹ &lt;code&gt;nginx.conf&lt;/code&gt; é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;server {&#xA;    listen 443 ssl http2;&#xA;    listen [::]:443 ssl http2;&#xA;    server_name 1.2.3.4;&#xA;    add_header Strict-Transport-Security &amp;#34;max-age=31536000; includeSubdomains; preload&amp;#34;;&#xA;    ssl_certificate cert/certificate.crt;&#xA;    ssl_certificate_key cert/private.key;&#xA;    ssl_session_timeout 1d;&#xA;    ssl_session_cache shared:SSL:50m;&#xA;    ssl_session_tickets off;&#xA;    ssl_protocols TLSv1.2;&#xA;    ssl_ciphers &amp;#39;ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256&amp;#39;;&#xA;    ssl_prefer_server_ciphers on;&#xA;    ssl_stapling on;&#xA;    ssl_stapling_verify on;&#xA;    ssl_trusted_certificate cert/ca_bundle.crt;&#xA;    location / {&#xA;       proxy_pass http://127.0.0.1:8080;&#xA;    }&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ³¨æ„ï¼š&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;è¯·å°†ç¬¬4è¡Œä¸­çš„&lt;code&gt;1.2.3.4&lt;/code&gt;ä¿®æ”¹ä¸ºæœåŠ¡å™¨ IP åœ°å€ï¼›&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;cert/certificate.crt&lt;/code&gt;ã€&lt;code&gt;cert/private.key&lt;/code&gt;å’Œ&lt;code&gt;cert/ca_bundle.crt&lt;/code&gt;å‡ä¸ºç›¸å¯¹è·¯å¾„ä¸‹å­˜æ”¾çš„è¯ä¹¦æ–‡ä»¶ï¼Œç»å¯¹è·¯å¾„ä¸ºï¼š&lt;code&gt;/www/server/nginx/conf/cert&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h1 id=&#34;è§£å†³éƒ¨åˆ†-android-app-è¿æ¥-bark-åç«¯æœåŠ¡æ—¶æŠ¥é”™çš„é—®é¢˜&#34;&gt;âœğŸ»è§£å†³éƒ¨åˆ† Android App è¿æ¥ Bark åç«¯æœåŠ¡æ—¶æŠ¥é”™çš„é—®é¢˜&lt;/h1&gt;&#xA;&lt;p&gt;å¼€å¯ SSL ä¹‹åï¼Œåœ¨éƒ¨åˆ† Android åº”ç”¨å†…è®¿é—®æœåŠ¡å™¨åç«¯åœ°å€æ—¶å¯èƒ½ä¼šæŠ¥é”™â€œjava security cert.CertPathValidatorException: Trust anchor for certification path not foundâ€ï¼ŒåŸå› æ˜¯åç«¯æœåŠ¡åœ¨éƒ¨ç½² SSL æ—¶ç¼ºå°‘äº†ä¸­é—´è¯ä¹¦ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä½ å¯ä»¥åˆ©ç”¨ &lt;a href=&#34;https://www.myssl.cn/tools/downloadchain.html&#34;&gt;https://www.myssl.cn/tools/downloadchain.html&lt;/a&gt; è¿™ä¸ªå·¥å…·ï¼Œä½¿ç”¨å·²æœ‰çš„&lt;code&gt;cert/certificate.crt&lt;/code&gt;æ–‡ä»¶å¿«é€Ÿç”Ÿæˆä¸­é—´è¯ä¹¦ï¼Œæœ€åä¼šå¾—åˆ°&lt;code&gt;chain.crt&lt;/code&gt;è¿™ä¸ªæ–‡ä»¶ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€&lt;code&gt;certificate.crt&lt;/code&gt;ï¼Œåœ¨æ‰€æœ‰ä»£ç åé¢ä¾æ¬¡æ·»åŠ &lt;code&gt;ca_bundle.crt&lt;/code&gt;ã€&lt;code&gt;chain.crt&lt;/code&gt;è¿™ä¸¤ä¸ªæ–‡ä»¶é‡Œçš„å†…å®¹ï¼Œæœ€åçš„æ•ˆæœåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;-----BEGIN CERTIFICATE-----&#xA;è¿™é‡Œæ˜¯ certificate.crt åŸæœ¬çš„æ‰€æœ‰å†…å®¹&#xA;-----END CERTIFICATE-----&#xA;-----BEGIN CERTIFICATE-----&#xA;è¿™é‡Œæ˜¯ ca_bundle.crt æ–‡ä»¶ä¸­çš„æ‰€æœ‰å†…å®¹&#xA;-----END CERTIFICATE-----&#xA;-----BEGIN CERTIFICATE-----&#xA;è¿™é‡Œæ˜¯ chain.crt æ–‡ä»¶ä¸­çš„æ‰€æœ‰å†…å®¹&#xA;-----END CERTIFICATE-----&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¿å­˜æ–‡ä»¶ï¼Œç”¨è¿™ä¸ªç¼–è¾‘ä¹‹åçš„&lt;code&gt;certificate.crt&lt;/code&gt;æ–‡ä»¶æ›¿æ¢æœåŠ¡å™¨ä¸­ä¹‹å‰ä¸Šä¼ çš„çš„&lt;code&gt;certificate.crt&lt;/code&gt;ï¼Œä¸ªåˆ«åº”ç”¨ä¸­æŠ¥é”™çš„é—®é¢˜å³å¯è§£å†³ã€‚&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
